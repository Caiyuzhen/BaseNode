// Fs æ¨¡å—
const fs = require('fs')


// fs çš„ç›¸å¯¹ç›®å½•ç›¸å¯¹äºã€å‘½ä»¤è¡Œã€‘è€Œéã€å·¥ä½œç›®å½•ã€‘, ğŸŒŸ __dirname ç»å¯¹è·¯å¾„æ›´ç¨³å®š(æ‰€åœ¨æ–‡ä»¶çš„æ‰€åœ¨ç›®å½•), ä¸ä¼šéšç€å‘½ä»¤è¡Œçš„å˜åŒ–è€Œå˜åŒ–


// æ–°å¢æ–‡ä»¶ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
// å†™å…¥æ–‡ä»¶ (âš¡ï¸å¼‚æ­¥, æ€§èƒ½æ¯”è¾ƒå¥½)
fs.writeFile('./ä¸€ä¸ªæ–‡ä»¶.txt', 'å†…å®¹å†…å®¹', err=>{ //æ–‡ä»¶è·¯å¾„, å†…å®¹, å›è°ƒå‡½æ•°
	if(err) {
		console.log('å†™å…¥å¤±è´¥')
		return
	}
	console.log(err)
})



// å†™å…¥æ–‡ä»¶ (âš¡ï¸åŒæ­¥)
fs.writeFileSync('./ä¸€ä¸ªåŒæ­¥çš„æ–‡ä»¶.txt', 'åŒæ­¥æ–‡ä»¶çš„å†…å®¹')



// è¿½åŠ æ–‡ä»¶ (âš¡ï¸å¼‚æ­¥, æ€§èƒ½æ¯”è¾ƒå¥½)
fs.appendFile('./ä¸€ä¸ªæ–‡ä»¶.txt', '\r\nè¿½åŠ çš„å†…å®¹', {flag: 'a'}, err=>{ // \r\n è¡¨ç¤ºæ¢è¡Œ, ç¬¬ä¸‰ä¸ªå‚æ•° {flag: 'a'} è¡¨ç¤ºè¿½åŠ çš„è€Œéè¦†ç›–
	if(err) {
		console.log('å†™å…¥å¤±è´¥')
		return
	}
	console.log(err)
})



// è¿½åŠ æ–‡ä»¶ (âš¡ï¸åŒæ­¥)
fs.appendFileSync('./ä¸€ä¸ªåŒæ­¥çš„æ–‡ä»¶.txt', 'åŒæ­¥æ–‡ä»¶çš„è¿½åŠ å†…å®¹')




// ğŸ“º æµå¼çš„å†™å…¥ (é€‚åˆå†™å…¥é¢‘ç‡è¾ƒé«˜ & å¤§æ–‡ä»¶çš„åœºæ™¯)
const ws = fs.createWriteStream('./ä¸€ä¸ªæµå¼çš„æ–‡ä»¶.txt') //ã€ğŸ”‹ ç¬¬ä¸€æ­¥ã€‘å»ºç«‹é€šé“
ws.write('ç¬¬ 1 å¥è¯\r\n') //ã€ğŸ”‹ ç¬¬äºŒæ­¥ã€‘å†™å…¥å†…å®¹
ws.write('ç¬¬ 2 å¥è¯\r\n')
ws.write('ç¬¬ 3 å¥è¯\r\n')
ws.write('ç¬¬ 4 å¥è¯')

ws.close() //ã€ğŸ”‹ ç¬¬ä¸‰æ­¥ã€‘å…³é—­é€šé“






// è¯»å–æ–‡ä»¶ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
// è¯»å–æ–‡ä»¶ (âš¡ï¸å¼‚æ­¥, æ€§èƒ½æ¯”è¾ƒå¥½)
fs.readFile('./ä¸€ä¸ªæ–‡ä»¶.txt', 'utf8', (err, data)=>{ //æ–‡ä»¶è·¯å¾„, ç¼–ç æ ¼å¼, å›è°ƒå‡½æ•°
	if(err) {
		console.log('å†™å…¥å¤±è´¥')
		return
	}
	console.log('è¯»å–å‡ºäº†:',data.toString())
})



// è¯»å–æ–‡ä»¶ ï¼ˆâš¡ï¸åŒæ­¥ï¼‰
let data = fs.readFileSync('./ä¸€ä¸ªåŒæ­¥çš„æ–‡ä»¶.txt')
console.log('è¯»å–äº†:', data.toString())



// ğŸ“º æµå¼çš„è¯»å– (é€‚åˆè¯»å–é¢‘ç‡è¾ƒé«˜ & å¤§æ–‡ä»¶çš„åœºæ™¯)
const rs = fs.createReadStream('./ä¸€ä¸ªæµå¼çš„æ–‡ä»¶.txt') //ã€ğŸ”‹ ç¬¬ä¸€æ­¥ã€‘å»ºç«‹é€šé“
rs.on('data', chunk => { //ã€ğŸ”‹ ç¬¬äºŒæ­¥ã€‘ç›‘å¬é€šé“
	console.log(chunk.length) //54 bytes, è¡¨ç¤º  0.0054kb 
	console.log('è¯»å–å‡ºäº†:', chunk.toString())
})

rs.on('end', chunk => {
	console.log('è¯»å–å®Œæ¯•')
})






// å¤åˆ¶æ–‡ä»¶ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
// æœ¬è´¨ä¸Šæ˜¯å–å‡ºæ–‡ä»¶å†…å®¹å†å¤åˆ¶åˆ°å¦ä¸€ä¸ªæ–‡ä»¶

// åŒæ­¥å¤åˆ¶ (ğŸš€å å†…å­˜å¤§, é€‚åˆå¤åˆ¶å°æ–‡ä»¶)
let newData = fs.readFileSync('./ä¸€ä¸ªåŒæ­¥çš„æ–‡ä»¶.txt')
fs.writeFileSync('./æ–°æ–‡ä»¶å¤¹/æµå¼æ–°æ–‡ä»¶.txt', newData)



// æµå¼å¤åˆ¶ (ğŸš€å å†…å­˜å°, é€‚åˆå¤åˆ¶å¤§æ–‡ä»¶)
let rs2 = fs.createReadStream('./ä¸€ä¸ªåŒæ­¥çš„æ–‡ä»¶.txt')
let newData2 = fs.createWriteStream('./ä¸€ä¸ªåŒæ­¥çš„æ–‡ä»¶.txt')

rs2.on('data', chunk => {
	newData2.write(chunk)
})

rs2.on('end', chunk => {
	// æŸ¥çœ‹å†…å­˜å ç”¨é‡
	console.log(process.memoryUsage().rss) // 36503552 byte ã€é™¤ä»¥ã€‘ 1024 = X KB  ã€å†é™¤ä»¥ã€‘ 1024 = X MB
})






// é‡å‘½å & ç§»åŠ¨æ–‡ä»¶ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
fs.rename('./ä¸€ä¸ªè¦è¢«æ”¹åçš„æ–‡ä»¶.txt', './æ–°æ–‡ä»¶å¤¹/ğŸš€æ–°åå­—.txt', err => { //âš¡ï¸ï¼ˆæ—§è·¯å¾„ï¼‰æ—§åå­—, ï¼ˆæ–°è·¯å¾„ï¼‰æ–°åå­—, å›è°ƒå‡½æ•°
	if(err) {
		console.log(err)
		return
	}
	console.log('ğŸ‰ æ–‡ä»¶å¤¹ç§»åŠ¨æˆåŠŸ!')
}) 




// åˆ é™¤æ–‡ä»¶ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
fs.unlink('./ä¸€ä¸ªæ–‡ä»¶.txt', err => { //âš¡ï¸æ–‡ä»¶è·¯å¾„, å›è°ƒå‡½æ•°')
	if(err) {
		console.log(err)
	}
	console.log('åˆ é™¤æˆåŠŸ')
})




// åˆ›å»º ã€è¯»å– ã€ ç§»åŠ¨æ–‡ä»¶å¤¹ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
// ä¸€èˆ¬åˆ›å»ºæ–‡ä»¶å¤¹
fs.mkdir('./html', err => {
	if(err) {
		console.log('åˆ›å»ºå¤±è´¥')
	}
	console.log('åˆ›å»ºæˆåŠŸ')
})


//é€’å½’åˆ›å»ºæ–‡ä»¶å¤¹
fs.mkdir('./é€’å½’åˆ›å»º/å­æ–‡ä»¶å¤¹/abc', { recursive: true }, err => {
	if(err) {
		console.log('åˆ›å»ºå¤±è´¥')
	}
	console.log('åˆ›å»ºæˆåŠŸ')
})


// é€’å½’è¯»å–æ–‡ä»¶å¤¹
fs.readdir('./é€’å½’åˆ›å»º', (err, data) => {
	if(err) {
		console.log('è¯»å–å¤±è´¥')
	}
	console.log('ğŸ‘€è¯»å–å‡ºæ–‡ä»¶å¤¹:',data)
})


// åˆ é™¤æ–‡ä»¶å¤¹
fs.rm('./é€’å½’åˆ›å»º/å­æ–‡ä»¶å¤¹-2', { recursive: true }, err => { // recursive: true è¡¨ç¤ºæ”¯æŒåˆ é™¤éç©ºæ–‡ä»¶å¤¹
	if(err) {
		console.log('âŒåˆ é™¤å¤±è´¥')
	}
	console.log('ğŸš® åˆ é™¤æˆåŠŸ')
})




// æŸ¥çœ‹æ–‡ä»¶çš„çŠ¶æ€ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
// ğŸ‘‡ é¿å… cil å·¥ä½œç›®å½•çš„æ”¹å˜ä»è€Œå¯¼è‡´ bug
// __dirname + '/ä¸€ä¸ªæµå¼çš„æ–‡ä»¶.txt' 
// './ä¸€ä¸ªæµå¼çš„æ–‡ä»¶.txt'
fs.stat(__dirname + '/ä¸€ä¸ªæµå¼çš„æ–‡ä»¶.txt', (err, data) => {
	if(err) {
		console.log('âŒæŸ¥çœ‹å¤±è´¥')
		return
	}
	console.log('ğŸ‘€ æŸ¥çœ‹å‡ºäº†:',data)

	// æŸ¥çœ‹ç›®æ ‡èµ„æºæ˜¯ä¸æ˜¯ä¸€ä¸ªæ–‡ä»¶
	console.log(data.isFile())

	// æŸ¥çœ‹ç›®æ ‡èµ„æºæ˜¯ä¸æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹
	console.log(data.isDirectory())
})



